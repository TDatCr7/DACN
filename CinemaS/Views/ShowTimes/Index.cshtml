@model List<CinemaS.Models.ViewModels.ShowTimeVM>
@{
	ViewData["Title"] = "Quản lý Suất chiếu";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<div class="container mt-4">
	<div class="d-flex justify-content-between align-items-center mb-4">
		<h1><i class="fas fa-calendar-alt"></i> Quản lý Suất chiếu</h1>
		<a asp-action="Create" class="btn btn-primary">
			<i class="fas fa-plus-circle"></i> Tạo suất chiếu
		</a>
	</div>

	@if (TempData["Message"] != null)
	{
		<div class="alert alert-success alert-dismissible fade show">
			@TempData["Message"]
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
	}

	@if (Model == null || !Model.Any())
	{
		<div class="alert alert-info">
			<i class="fas fa-info-circle"></i> Chưa có suất chiếu nào. Hãy tạo suất chiếu mới!
		</div>
	}
	else
	{
		<div class="table-responsive">
			<table class="table table-striped table-hover">
				<thead class="table-dark">
					<tr>
						<th>Mã suất</th>
						<th>Phim</th>
						<th>Phòng</th>
						<th>Ngày chiếu</th>
						<th>Giờ bắt đầu</th>
						<th>Giờ kết thúc</th>
						<th>Ghế trống</th>
						<th>Thao tác</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
					{
						<tr>
							<td><strong>@item.ShowTimeId</strong></td>
							<td>@item.MovieTitle</td>
							<td><span class="badge bg-info">@item.CinemaTheaterName</span></td>
							<td>@item.ShowDate?.ToString("dd/MM/yyyy")</td>
							<td>@item.StartTime?.ToString("HH:mm")</td>
							<td>@item.EndTime?.ToString("HH:mm")</td>
							<td>
								@if (item.AvailableSeats > 0)
								{
									<span class="badge bg-success">@item.AvailableSeats/@item.TotalCinema</span>
								}
								else
								{
									<span class="badge bg-danger">Hết chỗ</span>
								}
							</td>
							<td>
								<a asp-controller="Booking" asp-action="SeatSelection" asp-route-id="@item.ShowTimeId"
								   class="btn btn-sm btn-warning">
									<i class="fas fa-chair"></i> Chọn ghế
								</a>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}
</div>
