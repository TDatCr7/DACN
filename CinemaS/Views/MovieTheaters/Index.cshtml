@model IEnumerable<CinemaS.Models.MovieTheaters>

@{
	ViewData["Title"] = "Quản lý Rạp Chiếu";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/management.css" />

<div class="admin-shell">
    <div class="admin-panel">

<div class="container-fluid mt-4">
	<div class="d-flex justify-content-between align-items-center mb-4">
		<h1 class="mb-0"><i class="fas fa-film"></i> Quản lý Rạp Chiếu</h1>
		<div class="d-flex gap-2">
			<a asp-action="Create" class="btn btn-primary btn-sweep px-3"
			   style="border-radius:999px; padding:9px 20px; font-size:14px; font-weight:700; white-space:nowrap;">
				<i class="fa-solid fa-plus me-1"></i> Tạo phòng mới
			</a>
			<a asp-controller="CinemaTheaters" asp-action="Index" class="btn btn-outline-light-rounded btn-sweep px-3"
			   style="border-radius:999px; padding:9px 20px; font-size:14px; font-weight:700; white-space:nowrap;">
				<i class="fa-solid fa-arrow-left"></i> Quay lại
			</a>
		</div>
	</div>

	@* Thông báo *@
	@if (TempData["Message"] != null)
	{
		<div class="alert alert-success alert-dismissible fade show" role="alert">
			<i class="fas fa-check-circle"></i> @TempData["Message"]
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
	}

	@if (TempData["Warning"] != null)
	{
		<div class="alert alert-warning alert-dismissible fade show" role="alert">
			<i class="fas fa-exclamation-triangle"></i> @TempData["Warning"]
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
	}

	@if (TempData["Error"] != null)
	{
		<div class="alert alert-danger alert-dismissible fade show" role="alert">
			<i class="fas fa-exclamation-circle"></i> @TempData["Error"]
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
	}

	@* Tìm kiếm *@
	<div class="admin-toolbar">
		<form method="get"
			  class="admin-search-shell d-flex gap-2 align-items-center"
			  id="adminFilterForm">

			<div class="input-group admin-search-compact">
				<input type="text"
					   name="searchString"
					   class="form-control admin-search-input"
					   placeholder="Tìm theo tên, địa chỉ hoặc mã rạp..."
					   value="@ViewData["CurrentFilter"]" />
				<button class="admin-search-btn" type="submit">
					<i class="fas fa-search"></i>
				</button>
			</div>

		</form>
	</div>

	@* Bảng danh sách - sử dụng admin-table-wrap và admin-table *@
	<div class="admin-table-wrap">
		<table class="table admin-table align-middle">
			<thead>
				<tr>
					<th><i class="fa-solid fa-hashtag"></i>STT</th>
					<th><i class="fa-solid fa-tag"></i>Mã Rạp</th>
					<th><i class="fa-solid fa-building"></i>Tên Rạp</th>
					<th><i class="fa-solid fa-location-dot"></i>Địa chỉ</th>
					<th><i class="fa-solid fa-phone"></i>Hotline</th>
					<th><i class="fa-solid fa-toggle-on"></i>Trạng thái</th>
					<th style="text-align:right;"><i class="fa-solid fa-ellipsis-vertical"></i>Hành động</th>
				</tr>
			</thead>
			<tbody id="tableBody">
				@if (Model != null && Model.Any())
				{
					int index = 1;
					foreach (var item in Model)
					{
						<tr>
							<td class="text-center fw-bold">@index</td>
							<td><strong>@item.MovieTheaterId</strong></td>
							<td>@item.Name</td>
							<td class="admin-text-muted">@item.Address</td>
							<td>@item.Hotline</td>
							<td>
								@if (item.Status == 1)
								{
									<span class="badge-email-ok">
										<i class="fas fa-check"></i> Hoạt động
									</span>
								}
								else
								{
									<span class="badge-email-no">
										<i class="fas fa-times"></i> Tạm ngưng
									</span>
								}
							</td>
							<td class="text-end">
								<a asp-action="Details" asp-route-id="@item.MovieTheaterId"
								   class="admin-icon-btn"
								   title="Xem chi tiết">
									<i class="fa-regular fa-eye"></i>
								</a>
								<a asp-action="Edit" asp-route-id="@item.MovieTheaterId"
								   class="admin-icon-btn"
								   title="Chỉnh sửa">
									<i class="fa-solid fa-pen"></i>
								</a>
								<a asp-action="Delete" asp-route-id="@item.MovieTheaterId"
								   class="admin-icon-btn admin-icon-btn-danger"
								   title="Xóa">
									<i class="fa-solid fa-trash-can"></i>
								</a>
							</td>
						</tr>
						index++;
					}
				}
				else
				{
					<tr>
						<td colspan="7" class="text-center admin-text-muted py-4">
							<i class="fas fa-inbox fa-3x mb-3 d-block"></i>
							<strong>Không tìm thấy rạp chiếu nào</strong>
							@if (!string.IsNullOrEmpty(ViewData["CurrentFilter"]?.ToString()))
							{
								<p class="mb-0">với từ khóa "<strong>@ViewData["CurrentFilter"]</strong>"</p>
							}
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>

	<div class="mt-4"></div>
</div>
</div>
