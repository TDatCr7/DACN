@model CinemaS.Models.MovieTheaters

@{
	ViewData["Title"] = "Xóa Rạp Chiếu";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
	.delete-container {
		background: #fff;
		border-radius: 10px;
		padding: 30px;
		box-shadow: 0 4px 6px rgba(0,0,0,0.1);
		max-width: 700px;
		margin: 0 auto;
	}

	.warning-box {
		background-color: #fff3cd;
		border-left: 4px solid #ffc107;
		padding: 15px;
		border-radius: 5px;
		margin-bottom: 20px;
	}

	.danger-box {
		background-color: #f8d7da;
		border-left: 4px solid #dc3545;
		padding: 15px;
		border-radius: 5px;
		margin-bottom: 20px;
	}

	.info-grid {
		display: grid;
		grid-template-columns: 150px 1fr;
		gap: 10px;
		margin-bottom: 20px;
	}

	.info-label {
		font-weight: 600;
		color: #666;
	}

	.info-value {
		color: #333;
	}
</style>

<div class="container mt-4">
	<div class="delete-container">
		<h1 class="mb-4 text-danger">
			<i class="fas fa-exclamation-triangle"></i> Xác Nhận Xóa Rạp Chiếu
		</h1>

		@if (ViewBag.UsageCount > 0)
		{
			<div class="danger-box">
				<h5><i class="fas fa-ban"></i> Không thể xóa!</h5>
				<p class="mb-0">
					Rạp này đang có <strong>@ViewBag.UsageCount</strong> phòng chiếu.
					Vui lòng xóa hết các phòng chiếu trước khi xóa rạp.
				</p>
			</div>
		}
		else
		{
			<div class="warning-box">
				<h5><i class="fas fa-exclamation-triangle"></i> Cảnh báo!</h5>
				<p class="mb-0">
					Bạn có chắc chắn muốn xóa rạp chiếu này? Hành động này không thể hoàn tác!
				</p>
			</div>
		}

		<h4 class="mb-3">Thông tin rạp chiếu:</h4>

		<div class="info-grid">
			<div class="info-label">Mã Rạp:</div>
			<div class="info-value"><strong>@Model.MovieTheaterId</strong></div>

			<div class="info-label">Tên Rạp:</div>
			<div class="info-value">@Model.Name</div>

			<div class="info-label">Tỉnh/Thành phố:</div>
			<div class="info-value">@ViewBag.ProvinceName</div>

			<div class="info-label">Địa chỉ:</div>
			<div class="info-value">@Model.Address</div>

			<div class="info-label">Hotline:</div>
			<div class="info-value">@Model.Hotline</div>

			<div class="info-label">Trạng thái:</div>
			<div class="info-value">
				@if (Model.Status == 1)
				{
					<span class="badge bg-success">Hoạt động</span>
				}
				else
				{
					<span class="badge bg-danger">Tạm ngưng</span>
				}
			</div>
		</div>

		<div class="d-flex justify-content-between mt-4">
			<a asp-action="Index" class="btn btn-secondary">
				<i class="fas fa-arrow-left"></i> Quay lại
			</a>

			@if (ViewBag.UsageCount == 0)
			{
				<form asp-action="Delete" method="post" style="display: inline;" onsubmit="return confirmDelete();">
					<input type="hidden" asp-for="MovieTheaterId" />
					<button type="submit" class="btn btn-danger">
						<i class="fas fa-trash"></i> Xóa
					</button>
				</form>
			}
		</div>
	</div>
</div>

@section Scripts {
	<script>
		function confirmDelete() {
			   return confirm('Bạn có CHẮC CHẮN muốn xóa rạp chiếu này không?');
		 }
	</script>
}
