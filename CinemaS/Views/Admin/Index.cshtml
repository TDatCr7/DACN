@{
    ViewData["Title"] = "Quản Lý Hệ Thống";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .page-admin-shell {
        padding: 30px 0 50px;
    }

    .admin-header-block {
        max-width: 820px;
        margin: 0 auto 26px;
        text-align: center;
    }

    .admin-title {
        font-weight: 900;
        font-size: 30px;
        color: #e5e7ff;
        margin-bottom: 10px;
    }

        .admin-title i {
            color: #7c3aed;
        }

    .tt-subnote {
        margin: 0 auto;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 12px;
        color: #e5e7f5;
        background: radial-gradient(circle at 0 0, rgba(59,130,246,.25), transparent 60%), rgba(15,23,42,.96);
        border: 1px solid rgba(148,163,255,.6);
        box-shadow: 0 8px 18px rgba(15,23,42,.9);
    }

    .admin-grid-card {
        background: radial-gradient(circle at 0 0, rgba(59,130,246,.3), transparent 55%), radial-gradient(circle at 100% 0, rgba(124,58,237,.25), transparent 55%), linear-gradient(145deg, #020617, #020617);
        border-radius: 20px;
        border: 1px solid rgba(148,163,255,.4);
        box-shadow: 0 18px 45px rgba(15,23,42,.95), 0 0 0 1px rgba(15,23,42,.85);
        transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    }

        .admin-grid-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 22px 55px rgba(15,23,42,.95);
            border-color: rgba(129,140,248,.9);
        }

    .admin-card-icon {
        width: 56px;
        height: 56px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 12px;
        background: radial-gradient(circle at 30% 0, rgba(251,191,36,.65), transparent 60%), rgba(15,23,42,1);
        box-shadow: 0 14px 30px rgba(15,23,42,.95);
        font-size: 26px;
    }

    .admin-card-title {
        font-weight: 800;
        font-size: 16px;
        color: #f9fafb;
        margin-bottom: 6px;
    }

    .admin-card-text {
        font-size: 13px;
        color: #9aa5c6;
        margin-bottom: 16px;
        min-height: 40px;
    }

    .btn-admin-go {
        background: linear-gradient(90deg,#3b5ccc,#7c3aed);
        border: none;
        font-weight: 700;
        border-radius: 999px;
        font-size: 13px;
        padding: 9px 0;
    }

        .btn-admin-go i {
            font-size: 12px;
        }

        .btn-admin-go:hover {
            filter: brightness(1.06);
        }

    /* =========================
       ADMIN TOAST (RIGHT)
       ========================= */

    /* vỏ toast cố định mép phải, dưới top island */
    .gl-toast {
        position: fixed;
        right: 16px;
        top: 92px;
        z-index: 12000;
        width: min(520px, calc(100vw - 32px));
        transform: translateX(110%);
        opacity: 0;
        pointer-events: none;
        transition: transform .38s ease, opacity .38s ease;
    }

        /* trạng thái hiện */
        .gl-toast.is-show {
            transform: translateX(0);
            opacity: 1;
            pointer-events: auto;
        }

        /* trạng thái ẩn */
        .gl-toast.is-hide {
            transform: translateX(110%);
            opacity: 0;
            pointer-events: none;
        }

    /* card toast */
    .gl-toast-card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 999px;
        background: radial-gradient(circle at 0 0, rgba(34,197,94,.22), transparent 60%), rgba(15,23,42,.96);
        border: 1px solid rgba(34,197,94,.55);
        box-shadow: 0 16px 42px rgba(15,23,42,.92), 0 0 0 1px rgba(15,23,42,.75);
        color: #bbf7d0;
    }

    /* icon tròn */
    .gl-toast-ico {
        width: 38px;
        height: 38px;
        border-radius: 999px;
        display: grid;
        place-items: center;
        background: rgba(34,197,94,.18);
        border: 1px solid rgba(34,197,94,.45);
        flex: 0 0 auto;
    }

        .gl-toast-ico i {
            font-size: 16px;
            color: #86efac;
        }

    /* text */
    .gl-toast-text {
        font-weight: 800;
        font-size: 13px;
        color: #e9ecf6;
        letter-spacing: .2px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        flex: 1 1 auto;
    }

    /* nút close */
    .gl-toast-close {
        width: 34px;
        height: 34px;
        border-radius: 999px;
        border: 1px solid rgba(148,163,255,.35);
        background: rgba(2,6,23,.55);
        color: #e5e7eb;
        display: grid;
        place-items: center;
        cursor: pointer;
        flex: 0 0 auto;
    }

        .gl-toast-close:hover {
            filter: brightness(1.08);
        }

    /* progress */
    .gl-toast-progress {
        height: 3px;
        border-radius: 999px;
        margin-top: 8px;
        overflow: hidden;
        background: rgba(255,255,255,.10);
        border: 1px solid rgba(255,255,255,.08);
    }

        .gl-toast-progress > span {
            display: block;
            height: 100%;
            width: 100%;
            transform: translateX(-100%);
            background: linear-gradient(90deg, rgba(34,197,94,1), rgba(250,204,21,1));
        }

    .gl-toast.is-show .gl-toast-progress > span {
        animation: glToastProgress 4.6s linear forwards;
    }

    @@keyframes glToastProgress {
        to {
            transform: translateX(0);
        }
    }

    /* mobile: tránh che dropdown */
    @@media (max-width: 575.98px) {
        .gl-toast {
            top: 84px;
            right: 12px;
            width: calc(100vw - 24px);
        }
    }


    /* =========================
           ADMIN SPLASH (ADD)
           ========================= */
    #adminSplash {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: grid;
        place-items: center;
        background: radial-gradient(1200px 700px at 50% 40%, rgba(239,68,68,.22) 0%, rgba(124,58,237,.16) 45%, rgba(2,6,23,1) 78%);
        backdrop-filter: blur(8px);
        pointer-events: none;
        opacity: 1;
        transition: opacity .55s ease, transform .55s ease;
    }

        #adminSplash.admin-splash-hide {
            opacity: 0;
            transform: scale(1.02);
        }

    .admin-splash-core {
        text-align: center;
        padding: 22px 22px;
        border-radius: 24px;
        border: 1px solid rgba(248,113,113,.55);
        background: radial-gradient(circle at 0 0, rgba(248,113,113,.22), transparent 55%), rgba(15,23,42,.82);
        box-shadow: 0 30px 90px rgba(0,0,0,.65), 0 0 0 1px rgba(15,23,42,.8);
        position: relative;
        isolation: isolate;
        max-width: 560px;
        width: calc(100% - 28px);
    }

        .admin-splash-core::before {
            content: "";
            position: absolute;
            inset: -14px;
            border-radius: 30px;
            background: conic-gradient(from 220deg, rgba(239,68,68,.85), rgba(124,58,237,.75), rgba(59,92,204,.75), rgba(239,68,68,.85));
            filter: blur(18px);
            opacity: .95;
            z-index: -1;
            animation: adminGlow 1.35s ease-out forwards;
        }

    @@keyframes adminGlow {
        0% {
            opacity: 0;
            transform: scale(.92);
        }

        35% {
            opacity: 1;
            transform: scale(1.04);
        }

        100% {
            opacity: .55;
            transform: scale(1);
        }
    }

    .admin-splash-badge {
        width: 78px;
        height: 78px;
        border-radius: 22px;
        margin: 0 auto 14px;
        display: grid;
        place-items: center;
        background: radial-gradient(circle at 30% 0, rgba(251,191,36,.55), transparent 60%), rgba(2,6,23,.92);
        border: 1px solid rgba(248,113,113,.45);
        box-shadow: 0 18px 50px rgba(0,0,0,.5);
        position: relative;
    }

        .admin-splash-badge i {
            font-size: 34px;
            color: #fca5a5;
            text-shadow: 0 0 18px rgba(239,68,68,.65);
        }

    .admin-splash-title {
        font-weight: 1000;
        letter-spacing: .6px;
        color: #fff;
        font-size: 26px;
        margin: 0 0 8px;
        text-transform: uppercase;
        text-shadow: 0 0 20px rgba(239,68,68,.35), 0 10px 40px rgba(0,0,0,.5);
    }

    .admin-splash-sub {
        margin: 0;
        color: rgba(226,232,240,.9);
        font-weight: 800;
        letter-spacing: .2px;
        text-shadow: 0 0 18px rgba(124,58,237,.25);
        font-size: 13px;
    }

    .admin-scanline {
        position: absolute;
        left: 10%;
        right: 10%;
        top: 50%;
        height: 2px;
        background: linear-gradient(90deg, transparent, rgba(248,113,113,.75), rgba(124,58,237,.65), transparent);
        box-shadow: 0 0 24px rgba(239,68,68,.35);
        transform: translateY(-50%);
        opacity: .0;
        animation: scanIn 1.1s ease-out .1s forwards;
    }

    @@keyframes scanIn {
        0% {
            opacity: 0;
            transform: translateY(-50%) translateX(-60px);
        }

        35% {
            opacity: 1;
        }

        100% {
            opacity: 0;
            transform: translateY(-50%) translateX(60px);
        }
    }

    @@media (max-width: 575.98px) {
        .admin-splash-title {
            font-size: 22px;
        }

        .admin-splash-badge {
            width: 70px;
            height: 70px;
            border-radius: 20px;
        }

            .admin-splash-badge i {
                font-size: 30px;
            }
    }
</style>

<div id="adminSplash" aria-hidden="true">
    <div class="admin-splash-core">
        <div class="admin-scanline"></div>
        <div class="admin-splash-badge">
            <i class="fa-solid fa-user-shield"></i>
        </div>
        <div class="admin-splash-title">Admin</div>
        <p class="admin-splash-sub">Admin quyền hành tuyệt đối</p>
    </div>
</div>

<div class="container page-admin-shell">
    <div class="admin-header-block">
        <h1 class="admin-title">
            <i class="fas fa-cogs me-2"></i>
            Quản Lý Hệ Thống
        </h1>
        <div>
            <div class="tt-subnote">
                <span>Thiết lập và quản lý các chức năng dành cho Admin.</span>
            </div>
        </div>
    </div>

    @if (TempData["Message"] != null)
    {
        <div id="glAdminToast" class="gl-toast" data-msg="@TempData["Message"]">
            <div class="gl-toast-card">
                <div class="gl-toast-ico">
                    <i class="fa-solid fa-circle-check"></i>
                </div>

                <div class="gl-toast-text" title="@TempData["Message"]">
                    @TempData["Message"]
                </div>

                <button type="button" class="gl-toast-close" aria-label="Đóng">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="gl-toast-progress">
                <span></span>
            </div>
        </div>
    }


    <div class="row g-4">

        <!-- Quản lý Tài khoản -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-users-cog" style="color:#06b6d4;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Tài Khoản</div>
                    <p class="admin-card-text">Thêm, xoá, sửa và phân quyền người dùng.</p>
                    <a asp-controller="AdminUsers" asp-action="Index"
                       class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Phòng Chiếu -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-door-open" style="color:#3b5ccc;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Phòng Chiếu</div>
                    <p class="admin-card-text">Tạo mới và quản lý các phòng chiếu phim.</p>
                    <a href="/CinemaTheaters" class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Suất Chiếu -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-calendar-alt" style="color:#22c55e;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Suất Chiếu</div>
                    <p class="admin-card-text">Tạo lịch chiếu và sắp xếp suất chiếu.</p>
                    <a href="/ShowTimes" class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Phim -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-film" style="color:#a21caf;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Phim</div>
                    <p class="admin-card-text">Thêm mới, cập nhật thông tin phim đang chiếu.</p>
                    <a href="/Movies" class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Hóa Đơn -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fa-solid fa-file-invoice-dollar" style="color:#22c55e;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Hóa Đơn</div>
                    <p class="admin-card-text">Xem, chỉnh sửa và quản lý lịch sử thanh toán.</p>
                    <a asp-controller="Invoices" asp-action="Index"
                       class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Vé -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-ticket-alt" style="color:#3b5ccc;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Vé</div>
                    <p class="admin-card-text">Quản lý vé và các loại vé trong hệ thống.</p>
                    <a href="/Tickets/Management" class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Snack -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fas fa-utensils" style="color:#ff9800;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Đồ Ăn</div>
                    <p class="admin-card-text">Quản lý danh sách bắp nước và đồ ăn kèm.</p>
                    <a href="/Snacks/Management" class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

        <!-- Quản lý Khuyến mãi -->
        <div class="col-md-4">
            <div class="admin-grid-card h-100">
                <div class="card-body text-center p-4">
                    <div class="admin-card-icon">
                        <i class="fa-solid fa-gift" style="color:#f97316;"></i>
                    </div>
                    <div class="admin-card-title">Quản Lý Khuyến Mãi</div>
                    <p class="admin-card-text">Tạo và kiểm soát các mã giảm giá, ưu đãi cho khách.</p>
                    <a asp-controller="Promotions" asp-action="Index"
                       class="btn btn-admin-go w-100">
                        <i class="fas fa-arrow-right"></i> Truy cập
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            // ADD: splash mỗi lần load trang
            const splash = document.getElementById("adminSplash");
            if (splash) {
                splash.classList.remove("admin-splash-hide");
                setTimeout(() => {
                    splash.classList.add("admin-splash-hide");
                }, 800);
            }

                    // ====== ADMIN TOAST (RIGHT) ======
        const toast = document.getElementById("glAdminToast");
        if (toast) {
            const closeBtn = toast.querySelector(".gl-toast-close");
            let hideTimer = null;

            const show = () => {
                toast.classList.remove("is-hide");
                toast.classList.add("is-show");
                // tự ẩn sau ~5s
                hideTimer = setTimeout(hide, 5000);
            };

            const hide = () => {
                if (hideTimer) clearTimeout(hideTimer);
                toast.classList.remove("is-show");
                toast.classList.add("is-hide");
                // sau khi animation xong thì remove khỏi DOM để không chiếm click
                setTimeout(() => {
                    if (toast && toast.parentNode) toast.parentNode.removeChild(toast);
                }, 450);
            };

            if (closeBtn) closeBtn.addEventListener("click", hide);

            // click ra ngoài không tắt (giống kiểu toast), chỉ close bằng nút X
            show();
        }

        });
    </script>
}
